{"version":3,"sources":["webpack:///src/components/manage/signproject.vue","webpack:///./src/components/manage/signproject.vue?cd0c","webpack:///./src/components/manage/signproject.vue"],"names":["signproject","data","tableD","tableDatareRE","methods","Fncompanystaff","_this","this","api","companystaff","company_id","userInfo","u_company_id","user_id","then","result","code","newlist","forEach","element","fields","pk","push","filterTag","value","row","u_type","Fnsignproject","Puser_id","_this2","project_id","$route","query","p_o_id","res","Fnresponserlist","_this3","responserlist","Fnunsignproject","_this4","unsignproject","computed","extends_default","Object","vuex_esm","mounted","manage_signproject","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","width","attrs","stripe","prop","label","scopedSlots","_u","key","fn","scope","size","nativeOn","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.e31a04c00b4b1e48a4eb.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"jgTab\">\r\n    <div class=\"jieGou\">\r\n        <div class=\"jieGou_tit\">组织结构</div>\r\n          <el-table\r\n            :data=\"tableDatareRE\"\r\n            stripe\r\n            style=\"width: 100%\">\r\n            <el-table-column\r\n              prop=\"username\"\r\n              label=\"用户名\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"100\"\r\n              label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                  <!-- scope.row.name -->\r\n                  <el-button @click.native=\"Fnsignproject(scope.row.user_id)\" size=\"small\">绑定</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n    </div>\r\n    <!-- 这是绑定的人员数据表 -->\r\n    <div class=\"tablebox\">\r\n        <div class=\"jieGou_tit\">已绑定的用户</div>\r\n        <el-table\r\n        :data=\"tableD\"\r\n        stripe\r\n        style=\"width: 100%\">\r\n        <el-table-column\r\n            prop=\"username\"\r\n            label=\"用户名\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"phone_numbers\"\r\n            label=\"手机\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                  <el-button @click.native=\"Fnunsignproject(scope.row.user_id)\" size=\"small\">取消绑定</el-button>\r\n              </template>\r\n        </el-table-column>\r\n        </el-table>\r\n    </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport url from \"../../common/api\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n    data(){\r\n      return{\r\n        data: [],\r\n        tableD:[],//这是绑定的人员数据表\r\n        tableDatareRE:[]\r\n      };\r\n    },\r\n    methods:{\r\n      Fncompanystaff(){//调取查看公司员工\r\n        url.companystaff({\r\n          \"company_id\": this.userInfo.u_company_id,\r\n          \"user_id\": this.userInfo.user_id\r\n        }).then(result=>{\r\n          console.log(result,'//调取查看公司员工')\r\n          if(result.data.code[0]==200){\r\n            let xx=result.data.data\r\n            let newlist=[]\r\n            xx.forEach(element => {\r\n            element.fields.user_id=element.pk\r\n            newlist.push(element.fields)\r\n            });\r\n            this.tableDatareRE=newlist\r\n          }\r\n        })\r\n      },\r\n      filterTag(value, row) {//row.name---其中name和prop绑定的名字相同\r\n        return row.u_type === value;\r\n      },\r\n      Fnsignproject(Puser_id){//绑定用户操作\r\n        console.log(this.$route.query,'---------------绑定用户操作')\r\n        url.signproject({\r\n          \"project_id\": this.$route.query.project_id,\r\n          \"company_id\": this.$route.query.company_id,\r\n          \"user_id\": this.userInfo.user_id,\r\n          \"p_o_id\": Puser_id\r\n        }).then(res=>{\r\n          console.log(res,'-------------这是绑定用户操作')\r\n          this.Fnresponserlist()//关联用户列表\r\n        })\r\n      },\r\n      Fnresponserlist(){//关联用户列表\r\n        url.responserlist({\r\n          \"project_id\": this.$route.query.project_id,\r\n          \"user_id\": this.userInfo.user_id,\r\n        }).then(res=>{\r\n          console.log(res,'--------关联用户列表')\r\n          let xx=res.data.data\r\n          let newlist=[]\r\n          xx.forEach(element => {\r\n          element.fields.user_id=element.pk\r\n          newlist.push(element.fields)\r\n          });\r\n          this.tableD=newlist\r\n        })\r\n      },\r\n      Fnunsignproject(Puser_id){//取消用户与项目关联\r\n        url.unsignproject({\r\n          \"project_id\": this.$route.query.project_id,\r\n          \"company_id\": this.$route.query.company_id,\r\n          \"user_id\": this.userInfo.user_id,\r\n          \"p_o_id\": Puser_id\r\n        }).then(res=>{\r\n          this.Fnresponserlist()//关联用户列表\r\n          console.log(res,'------------取消用户与项目关联')\r\n        })\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState(['userInfo'])\r\n    },\r\n    mounted(){\r\n      this.Fncompanystaff()\r\n      this.Fnresponserlist()//关联用户列表\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .jgTab\r\n    display flex\r\n    margin 30px\r\n    .jieGou\r\n      width 300px\r\n    .jieGou_tit\r\n      margin-bottom 17px\r\n    .tablebox\r\n      flex 1\r\n      margin-left 10px\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/manage/signproject.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"jgTab\"},[_c('div',{staticClass:\"jieGou\"},[_c('div',{staticClass:\"jieGou_tit\"},[_vm._v(\"组织结构\")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableDatareRE,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"100\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){return _vm.Fnsignproject(scope.row.user_id)}}},[_vm._v(\"绑定\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"tablebox\"},[_c('div',{staticClass:\"jieGou_tit\"},[_vm._v(\"已绑定的用户\")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableD,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone_numbers\",\"label\":\"手机\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){return _vm.Fnunsignproject(scope.row.user_id)}}},[_vm._v(\"取消绑定\")])]}}])})],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a623eb94\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/manage/signproject.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a623eb94\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./signproject.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./signproject.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./signproject.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a623eb94\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./signproject.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a623eb94\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/manage/signproject.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}