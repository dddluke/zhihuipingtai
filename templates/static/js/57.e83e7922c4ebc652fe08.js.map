{"version":3,"sources":["webpack:///src/components/login/Changepassword.vue","webpack:///./src/components/login/Changepassword.vue?30f4","webpack:///./src/components/login/Changepassword.vue"],"names":["Changepassword","data","_this","this","ruleFormChangepassword","phone_numbers","password","newpassword","pwd2","code","rulesChangepassword","pattern","message","required","trigger","validator","rule","value","callback","Error","waitChangepassword","DYdisabledChangepassword","activeName","ruleForm","user_id","text","phone_number","phone_code","rules","image_code_url","DYdisabled","wait","methods","submitFormChangepassword","formName","_this2","$refs","validate","valid","userInfo","api","extends_default","then","res","FnTimeYChangepassword","_this3","test","tiem","ChangepasswordCode","phone","catch","err","trmer","setInterval","clearInterval","$message","error","handleClick","tab","event","submitForm","_this4","modifyphonenumber","FnTimeY","_this5","yzm","image_code","uuid","success","getCode","errmsg","Fnimage_code_url","generateUUID","code_image_url","d","Date","getTime","window","performance","now","replace","c","r","Math","random","floor","toString","computed","Object","vuex_esm","mounted","login_Changepassword","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","on","tab-click","model","$$v","expression","label","name","ref","label-width","prop","$set","_v","slot","disabled","size","click","$event","_s","placeholder","src","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/57.e83e7922c4ebc652fe08.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"custom-tree-container\">\r\n        <!-- <el-form :model=\"ruleFormChangepassword\" :rules=\"rulesChangepassword\" ref=\"ruleFormChangepassword\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n          <el-form-item label=\"手机号验证\" prop=\"phone_numbers\">\r\n            <el-input v-model=\"ruleFormChangepassword.phone_numbers\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"验证码\" prop=\"code\">\r\n            <el-input v-model=\"ruleFormChangepassword.code\">\r\n            <el-button slot=\"suffix\" class=\"Verification\" :disabled=\"DYdisabledChangepassword\" @click=\"FnTimeYChangepassword()\" size=\"medium\">{{waitChangepassword}}</el-button>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"旧密码\" prop=\"password\">\r\n            <el-input type=\"password\" v-model=\"ruleFormChangepassword.password\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"新密码\" prop=\"newpassword\">\r\n            <el-input type=\"password\" v-model=\"ruleFormChangepassword.newpassword\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"确认密码\" prop=\"pwd2\">\r\n            <el-input type=\"password\" v-model=\"ruleFormChangepassword.pwd2\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitFormChangepassword('ruleFormChangepassword')\">立即修改</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <hr> -->\r\n        <!-- 密码更改/手机号更改 -->\r\n        <el-tabs v-model=\"activeName\" type=\"card\" @tab-click=\"handleClick\">\r\n          <el-tab-pane label=\"修改密码\" name=\"first\">\r\n            <el-form :model=\"ruleFormChangepassword\" :rules=\"rulesChangepassword\" ref=\"ruleFormChangepassword\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n              <el-form-item label=\"手机号验证\" prop=\"phone_numbers\">\r\n                <el-input v-model=\"ruleFormChangepassword.phone_numbers\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码\" prop=\"code\">\r\n                <el-input v-model=\"ruleFormChangepassword.code\">\r\n                <el-button slot=\"suffix\" class=\"Verification\" :disabled=\"DYdisabledChangepassword\" @click=\"FnTimeYChangepassword()\" size=\"medium\">{{waitChangepassword}}</el-button>\r\n                </el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"旧密码\" prop=\"password\">\r\n                <el-input type=\"password\" v-model=\"ruleFormChangepassword.password\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"新密码\" prop=\"newpassword\">\r\n                <el-input type=\"password\" v-model=\"ruleFormChangepassword.newpassword\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"确认密码\" prop=\"pwd2\">\r\n                <el-input type=\"password\" v-model=\"ruleFormChangepassword.pwd2\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitFormChangepassword('ruleFormChangepassword')\">修改密码</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"修改手机号\" name=\"second\">\r\n            <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n              <el-form-item label=\"图形验证码\" prop=\"text\">\r\n                  <el-input class=\"L_inp\" v-model=\"ruleForm.text\" placeholder=\"请输入图片验证码\">\r\n                      <img :src=\"image_code_url\" slot=\"suffix\" class=\"Verification\" @click=\"Fnimage_code_url()\" alt=\"\">\r\n                  </el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\" prop=\"phone_number\">\r\n                  <el-input class=\"L_inp\" v-model=\"ruleForm.phone_number\" placeholder=\"请输入手机号\">\r\n                  </el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"发送验证码\" prop=\"phone_code\">\r\n                  <el-input class=\"L_inp\" v-model=\"ruleForm.phone_code\" placeholder=\"请输入手机号验证码\">\r\n                      <el-button slot=\"suffix\" class=\"Verification\" :disabled=\"DYdisabled\" @click=\"FnTimeY()\" size=\"medium\">{{wait}}</el-button>\r\n                  </el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">修改手机号</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport url from '../../common/api'\r\nimport { mapState } from \"vuex\";\r\n  export default {\r\n    data() {\r\n      var validatePass2Changepassword = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请再次输入密码'));\r\n        } else if (value !== this.ruleFormChangepassword.newpassword) {\r\n          callback(new Error('两次输入密码不一致!'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var coderules = (rule, value, callback) => {\r\n        if (value != this.code) {\r\n          callback(new Error('请输入正确的验证码'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        ruleFormChangepassword: {\r\n          phone_numbers: '',\r\n          password: '',\r\n          newpassword: '',\r\n          pwd2: '',\r\n          code: '',\r\n        },\r\n        rulesChangepassword: {\r\n          phone_numbers: [\r\n            { pattern: /^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$/, message: '手机号格式不正确',required: true, trigger: 'blur' }\r\n          ],\r\n          newpassword: [\r\n            { required: true,pattern: /^(\\w){6,20}$/, message: '请输入6-20个字母、数字、下划线', trigger: 'blur' }\r\n          ],\r\n          pwd2: [\r\n            { required: true,validator: validatePass2Changepassword, trigger: 'blur' }\r\n          ],\r\n          password: [\r\n            { required: true,pattern: /^(\\w){6,20}$/, message: '密码格式不对', trigger: 'blur' }\r\n          ],\r\n          code: [\r\n            { required: true,validator: coderules, trigger: 'blur' }\r\n          ],\r\n        },\r\n        waitChangepassword:'发送验证码',//验证码的html文字\r\n        DYdisabledChangepassword:false,//验证码按钮是否被禁用\r\n        code:null,//获取的验证码\r\n        activeName: 'first',//标签页标识\r\n        ruleForm: {//修改手机号提交表单\r\n          user_id:6,//用户id\r\n          text: '',//图片验证码\r\n          phone_number: '',//手机号\r\n          phone_code: '',//手机号验证码\r\n        },\r\n        rules: {//修改手机号提交表单\r\n          text: [\r\n              { required: true, message: '请输入图片验证码', trigger: 'blur' }\r\n          ],\r\n          phone_number: [\r\n              { required: true, pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$/,message: '请输入正确格式的手机号', trigger: 'blur' }\r\n          ],\r\n          phone_code: [\r\n              { required: true, message: '请输入手机号验证码', trigger: 'blur' }\r\n          ]\r\n        },\r\n        image_code_url:'',\r\n        DYdisabled:false,//验证码按钮是否被禁用\r\n        wait:'发送验证码',//验证码的html文字\r\n\r\n      };\r\n    },\r\n    methods: {\r\n      submitFormChangepassword(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          // \r\n          if (valid) {\r\n            this.ruleFormChangepassword.user_id=this.userInfo.user_id\r\n            url.Changepassword({\r\n              ...this.ruleFormChangepassword\r\n            }).then(res=>{\r\n              console.log(res,'-------------res注册返回值')\r\n            })\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n\r\n      },\r\n      FnTimeYChangepassword(formName) {\r\n          let reg=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$/\r\n          if(!reg.test(this.ruleFormChangepassword.phone_numbers)){\r\n            this.$message.error('手机号不正确');\r\n          }else{\r\n            if(!this.DYdisabledChangepassword){ //这里要进行手机号格式验证\r\n              this.DYdisabledChangepassword=true\r\n              let tiem=60\r\n              url.ChangepasswordCode({\r\n                phone:this.ruleFormChangepassword.phone_numbers\r\n              }).then(res=>{\r\n                console.log(res,'------成功发送验证码')\r\n                this.code=res.data.code\r\n              }).catch(err=>{\r\n                console.log(err,'-------失败发送验证码')\r\n              })\r\n              let trmer=setInterval(() => {\r\n                if(tiem<=0){\r\n                  clearInterval(trmer)\r\n                  this.waitChangepassword='发送验证码'\r\n                  this.DYdisabledChangepassword=false\r\n                }else{\r\n                  this.waitChangepassword=--tiem\r\n                }\r\n              }, 1000);\r\n            }\r\n          }\r\n      },\r\n      handleClick(tab, event) {//标签页标识触发的函数\r\n        // console.log(tab, event);\r\n      },\r\n      submitForm(formName) {//手机号更改提交事件\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.ruleFormChangepassword.user_id=this.userInfo.user_id\r\n            url.modifyphonenumber(this.ruleForm)\r\n            .then(res=>{\r\n              console.log(res,'------修改手机号')\r\n              if(res.data.code[0]==200){\r\n                // 修改成功清除数据\r\n                this.ruleForm={}\r\n                this.$message.error(res.data.message[0]);\r\n              }else{\r\n                this.$message.error(res.data.message[0]);\r\n              }\r\n            })\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      FnTimeY(){//点击发送验证码触发的方法\r\n        // 验证和验证码请求\r\n        let reg=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$/\r\n        if(reg.test(this.ruleForm.phone_number) && this.ruleForm.text !=''){\r\n          if(!this.DYdisabled){ //这里要进行手机号格式验证\r\n            this.DYdisabled=true\r\n            let tiem=60\r\n              url.yzm({\r\n                image_code:this.ruleForm.text,\r\n                uuid:this.uuid\r\n              },this.ruleForm.phone_number).then(res=>{\r\n                console.log(res,'------成功发送验证码')\r\n                if(res.data.code==200){\r\n                  this.$message.success('发送成功');\r\n                  this.getCode=res.data.getCode\r\n                }else{\r\n                \r\n                  this.$message.error(res.data.errmsg);\r\n                }\r\n              }).catch(err=>{\r\n                console.log(err,'-------失败发送验证码')\r\n              })\r\n              let trmer=setInterval(() => {\r\n              if(tiem<=0){\r\n                clearInterval(trmer)\r\n                this.wait='发送验证码'\r\n                this.DYdisabled=false\r\n              }else{\r\n                this.wait=--tiem\r\n              }\r\n            }, 1000);\r\n          }\r\n        }else{\r\n          this.$message.error('手机格式不正确或图片验证码为空');\r\n        }\r\n      },\r\n      Fnimage_code_url(){//获取验证码图片\r\n        this.uuid=this.generateUUID();\r\n        this.image_code_url=this.code_image_url+this.uuid+'/';\r\n      },\r\n      // 生成uuid\r\n      generateUUID() {\r\n          let d = new Date().getTime();\r\n          if(window.performance && typeof window.performance.now === \"function\"){\r\n              d += performance.now(); //use high-precision timer if available\r\n          }\r\n          let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n              let r = (d + Math.random()*16)%16 | 0;\r\n              d = Math.floor(d/16);\r\n              return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n          });\r\n          return uuid;\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState(['code_image_url','userInfo'])\r\n    },\r\n    mounted(){\r\n        this.Fnimage_code_url()//获取验证码图片\r\n    }\r\n  };\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.Verification\r\n    border 0\r\n    width 116px\r\n    border-left 1px solid #cccccc\r\n    line-height 18px\r\n    margin-top 2px\r\n    height 34px\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/login/Changepassword.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"custom-tree-container\"},[_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"修改密码\",\"name\":\"first\"}},[_c('el-form',{ref:\"ruleFormChangepassword\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleFormChangepassword,\"rules\":_vm.rulesChangepassword,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"手机号验证\",\"prop\":\"phone_numbers\"}},[_c('el-input',{model:{value:(_vm.ruleFormChangepassword.phone_numbers),callback:function ($$v) {_vm.$set(_vm.ruleFormChangepassword, \"phone_numbers\", $$v)},expression:\"ruleFormChangepassword.phone_numbers\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.ruleFormChangepassword.code),callback:function ($$v) {_vm.$set(_vm.ruleFormChangepassword, \"code\", $$v)},expression:\"ruleFormChangepassword.code\"}},[_c('el-button',{staticClass:\"Verification\",attrs:{\"slot\":\"suffix\",\"disabled\":_vm.DYdisabledChangepassword,\"size\":\"medium\"},on:{\"click\":function($event){return _vm.FnTimeYChangepassword()}},slot:\"suffix\"},[_vm._v(_vm._s(_vm.waitChangepassword))])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.ruleFormChangepassword.password),callback:function ($$v) {_vm.$set(_vm.ruleFormChangepassword, \"password\", $$v)},expression:\"ruleFormChangepassword.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newpassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.ruleFormChangepassword.newpassword),callback:function ($$v) {_vm.$set(_vm.ruleFormChangepassword, \"newpassword\", $$v)},expression:\"ruleFormChangepassword.newpassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"pwd2\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.ruleFormChangepassword.pwd2),callback:function ($$v) {_vm.$set(_vm.ruleFormChangepassword, \"pwd2\", $$v)},expression:\"ruleFormChangepassword.pwd2\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitFormChangepassword('ruleFormChangepassword')}}},[_vm._v(\"修改密码\")])],1)],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"修改手机号\",\"name\":\"second\"}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"图形验证码\",\"prop\":\"text\"}},[_c('el-input',{staticClass:\"L_inp\",attrs:{\"placeholder\":\"请输入图片验证码\"},model:{value:(_vm.ruleForm.text),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"text\", $$v)},expression:\"ruleForm.text\"}},[_c('img',{staticClass:\"Verification\",attrs:{\"slot\":\"suffix\",\"src\":_vm.image_code_url,\"alt\":\"\"},on:{\"click\":function($event){return _vm.Fnimage_code_url()}},slot:\"suffix\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"phone_number\"}},[_c('el-input',{staticClass:\"L_inp\",attrs:{\"placeholder\":\"请输入手机号\"},model:{value:(_vm.ruleForm.phone_number),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone_number\", $$v)},expression:\"ruleForm.phone_number\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送验证码\",\"prop\":\"phone_code\"}},[_c('el-input',{staticClass:\"L_inp\",attrs:{\"placeholder\":\"请输入手机号验证码\"},model:{value:(_vm.ruleForm.phone_code),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone_code\", $$v)},expression:\"ruleForm.phone_code\"}},[_c('el-button',{staticClass:\"Verification\",attrs:{\"slot\":\"suffix\",\"disabled\":_vm.DYdisabled,\"size\":\"medium\"},on:{\"click\":function($event){return _vm.FnTimeY()}},slot:\"suffix\"},[_vm._v(_vm._s(_vm.wait))])],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"修改手机号\")])],1)],1)],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2bccffe5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/Changepassword.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2bccffe5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Changepassword.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Changepassword.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Changepassword.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2bccffe5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Changepassword.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2bccffe5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/Changepassword.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}