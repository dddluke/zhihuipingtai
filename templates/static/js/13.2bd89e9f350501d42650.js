webpackJsonp([13],{RvDQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),r=s.n(a),l=s("w7XY"),i=s("NYxO"),n={data:function(){return{tableDatareRE:[{date:"这是家",name:"家",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"公司",address:"上海市普陀区金沙江路 1517 弄"},{date:"这是公司",name:"公司",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"家",address:"上海市普陀区金沙江路 1516 弄"}],dialogFormVisible:!1,ruleForm:{user_id:0,staff_name:"",staff_phone:"",staff_password:"",u_type:""},rules:{staff_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],staff_phone:[{required:!0,pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"请输入正确的手机号",trigger:"blur"}],staff_password:[{required:!0,pattern:/^(\w){6,20}$/,message:"请输入密码",trigger:"blur"}],u_type:[{required:!0,message:"请选择部门",trigger:"blur"}]},revise:!1}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.ruleForm.user_id=t.buserInfo.user_id,t.revise?l.a.editstaff(t.ruleForm).then(function(e){(e.data.code[0]="200")?(t.dialogFormVisible=!1,t.Fnemployeelist(),t.$message.success(e.data.message[0])):t.$message.error(e.data.message[0])}):l.a.managercreatestaffv2(t.ruleForm).then(function(e){(e.data.code[0]="200")?(t.dialogFormVisible=!1,t.Fnemployeelist(),t.$message.success(e.data.message[0])):t.$message.error(e.data.message[0])})})},filterTag:function(e,t){return t.u_type===e},Fnxx:function(e){var t=this;l.a.deactivatestaffv2({user_id:e,user_id1:this.buserInfo.user_id}).then(function(e){(e.data.code[0]="200")?(t.$message.success(e.data.message[0]),t.Fnemployeelist()):t.$message.error(e.data.message[0])})},Fnemployeelist:function(){var e=this;l.a.employeelist({user_id:this.buserInfo.user_id}).then(function(t){var s=[];t.data.data.forEach(function(e){e.fields.user_id=e.pk,s.push(e.fields)}),e.tableDatareRE=s})},Fnrevise:function(e){this.dialogFormVisible=!0,this.revise=!0,this.ruleForm={user_id1:e.user_id,staff_name:e.username,staff_phone:e.phone_numbers,staff_password:"",u_type:e.u_type}},Fnstaff:function(){this.dialogFormVisible=!0,this.revise=!1}},computed:r()({},Object(i.c)(["buserInfo"])),mounted:function(){this.Fnemployeelist()}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"title"},[e._v("\n        员工管理\n    ")]),e._v(" "),s("div",{staticClass:"relationBox_b"},[s("div",{staticClass:"jgTab"},[s("div",{staticClass:"tablebox"},[s("div",{staticClass:"jieGou_tit"},[e._v("\n              员工列表\n              "),s("div",{staticClass:"jieGou_tit_rigth"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.Fnstaff()}}},[e._v("新增员工")])],1),e._v(" "),s("el-divider")],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDatareRE,stripe:""}},[s("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{filters:[{text:"客服",value:"客服"},{text:"运维",value:"运维"},{text:"运营",value:"运营"}],"filter-method":e.filterTag,"filter-placement":"bottom-end",label:"部门"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(t.row.u_type)+"\n                  ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"phone_numbers",label:"手机"}}),e._v(" "),s("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small",type:"warning"},nativeOn:{click:function(s){return e.Fnrevise(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"danger"},nativeOn:{click:function(s){return e.Fnxx(t.row.user_id)}}},[e._v("停用")])]}}])})],1)],1)])]),e._v(" "),s("el-dialog",{attrs:{title:e.revise?"修改":"新增",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"staff_name"}},[s("el-input",{model:{value:e.ruleForm.staff_name,callback:function(t){e.$set(e.ruleForm,"staff_name",t)},expression:"ruleForm.staff_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"部门",prop:"u_type"}},[s("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.ruleForm.u_type,callback:function(t){e.$set(e.ruleForm,"u_type",t)},expression:"ruleForm.u_type"}},[s("el-option",{attrs:{label:"运维",value:"运维"}}),e._v(" "),s("el-option",{attrs:{label:"客服",value:"客服"}}),e._v(" "),s("el-option",{attrs:{label:"运营",value:"运营"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号",prop:"staff_phone"}},[s("el-input",{model:{value:e.ruleForm.staff_phone,callback:function(t){e.$set(e.ruleForm,"staff_phone",t)},expression:"ruleForm.staff_phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"staff_password"}},[s("el-input",{model:{value:e.ruleForm.staff_password,callback:function(t){e.$set(e.ruleForm,"staff_password",t)},expression:"ruleForm.staff_password"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.revise?"修改":"新增"))])],1)],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(n,o,!1,function(e){s("kJ92")},"data-v-e47005a8",null);t.default=u.exports},kJ92:function(e,t){}});
//# sourceMappingURL=13.2bd89e9f350501d42650.js.map