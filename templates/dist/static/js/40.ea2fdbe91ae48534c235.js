webpackJsonp([40],{D5nH:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("w7XY"),a={data:function(){return{formInline:{user:"",region:[]},tableData:[],addDialogFormVisible:!1,addForm:{user_id:11,w_name:"",w_type:"",w_content:"",w_status:""},modifyForm:{user_id:"",w_name:"",w_type:"",w_content:"",w_status:""},modifyDialogFormVisible:!1,addrules:{w_name:[{required:!0,message:"请输入工单名称",trigger:"blur"}],w_type:[{required:!0,message:"请输入工单类型",trigger:"blur"}],w_content:[{required:!0,message:"请输入工单内容",trigger:"blur"}],w_status:[{required:!0,message:"请选择工单状态",trigger:"blur"}]},recordDialogFormVisible:!1,recordForm:{number:"",name:"",region:"",date:(new Date).toLocaleDateString(),desc:""},ISeditworksheet:!1,Deditworksheet:{}}},methods:{onSubmit:function(){var e=this;this.formInline.region?o.a.searchworksheets({w_name:this.formInline.user,start_time:this.formInline.region[0],end_time:this.formInline.region[1]}).then(function(t){var r=[];t.data.data.forEach(function(e){e.fields.w_id=e.pk,r.push(e.fields)}),e.tableData=r}):o.a.searchworksheets({w_name:this.formInline.user,start_time:"",end_time:""}).then(function(t){var r=[];t.data.data.forEach(function(e){e.fields.w_id=e.pk,r.push(e.fields)}),e.tableData=r})},handleClick:function(e){this.$router.push("/bkIndex/WOsingle")},addOnSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.addDialogFormVisible=!1,o.a.addworksheet(e.addForm).then(function(t){"200"==t.data.code[0]&&(e.$message.success(t.data.message[0]),e.Fnviewworksheets())}).catch(function(e){})})},modifyOnSubmit:function(){var e=this;this.$refs.modifyForm.validate(function(t){if(!t)return!1;e.modifyDialogFormVisible=!1,e.modifyForm.user_id=11,o.a.Peditworksheet(e.modifyForm).then(function(t){"200"==t.data.code[0]&&(e.$message.success(t.data.message[0]),e.Fnviewworksheets())}).catch(function(e){})})},recordOnSubmit:function(){this.recordDialogFormVisible=!1},Fnviewmyworksheets:function(){var e=this;o.a.viewmyworksheets({user_id:11}).then(function(t){var r=[];t.data.data.forEach(function(e){e.fields.w_id=e.pk,r.push(e.fields)}),e.tableData=r})},Fneditworksheet:function(e){var t=this;this.ISeditworksheet=!0,o.a.editworksheet({user_id:11,w_id:e}).then(function(e){var r=[];e.data.data.forEach(function(e){e.fields.w_id=e.pk,r.push(e.fields)}),t.Deditworksheet=r[0]})},Fnmodifyeditworksheet:function(e){this.modifyDialogFormVisible=!0,this.modifyForm=e},Fnviewworksheets:function(){var e=this;o.a.viewworksheets({user_id:11}).then(function(t){var r=[];t.data.data.forEach(function(e){e.fields.w_id=e.pk,r.push(e.fields)}),e.tableData=r})}},mounted:function(){this.Fnviewworksheets()},filters:{ItoTime:function(e){return e?e.substring(0,e.indexOf("T")):""}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"title"},[e._v("\n      工单 \n    ")]),e._v(" "),r("div",{staticClass:"WOBox"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"日期范围"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),r("div",{staticClass:"BtnrightBox"},[r("el-button",{staticClass:"addCSS",attrs:{type:"warning"},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("新增")]),e._v(" "),r("el-button",{staticClass:"Btnright",attrs:{type:"success"},on:{click:e.Fnviewmyworksheets}},[e._v("我的工单")]),e._v(" "),r("el-button",{staticClass:"Btnright",attrs:{type:"primary"},on:{click:function(t){return e.Fnviewworksheets()}}},[e._v("全部工单")])],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addrules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"工单名称",prop:"w_name"}},[r("el-input",{model:{value:e.addForm.w_name,callback:function(t){e.$set(e.addForm,"w_name",t)},expression:"addForm.w_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工单类型",prop:"w_type"}},[r("el-input",{model:{value:e.addForm.w_type,callback:function(t){e.$set(e.addForm,"w_type",t)},expression:"addForm.w_type"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工单状态",prop:"w_status"}},[r("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.addForm.w_status,callback:function(t){e.$set(e.addForm,"w_status",t)},expression:"addForm.w_status"}},[r("el-option",{attrs:{label:"创建",value:"创建"}}),e._v(" "),r("el-option",{attrs:{label:"客服联系",value:"客服联系"}}),e._v(" "),r("el-option",{attrs:{label:"指派工程师",value:"指派工程师"}}),e._v(" "),r("el-option",{attrs:{label:"完成",value:"完成"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"工单内容",prop:"w_content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.w_content,callback:function(t){e.$set(e.addForm,"w_content",t)},expression:"addForm.w_content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.addOnSubmit}},[e._v("创建")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"记录",visible:e.recordDialogFormVisible},on:{"update:visible":function(t){e.recordDialogFormVisible=t}}},[r("el-form",{ref:"recordForm",attrs:{model:e.recordForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动名称"}},[r("el-input",{model:{value:e.recordForm.name,callback:function(t){e.$set(e.recordForm,"name",t)},expression:"recordForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动区域"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.recordForm.region,callback:function(t){e.$set(e.recordForm,"region",t)},expression:"recordForm.region"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),r("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"活动时间"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy/MM/dd"},model:{value:e.recordForm.date,callback:function(t){e.$set(e.recordForm,"date",t)},expression:"recordForm.date"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动形式"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.recordForm.desc,callback:function(t){e.$set(e.recordForm,"desc",t)},expression:"recordForm.desc"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.recordOnSubmit}},[e._v("创建")]),e._v(" "),r("el-button",[e._v("取消")])],1)],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"w_id",label:"工单编号",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"w_name",label:"名称",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("ItoTime")(t.row.w_time))+"\n          ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(r){return e.Fneditworksheet(t.row.w_id)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"warning",plain:""},nativeOn:{click:function(r){return e.Fnmodifyeditworksheet(t.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"工单详情",visible:e.ISeditworksheet},on:{"update:visible":function(t){e.ISeditworksheet=t}}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("工单ID:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e.Deditworksheet.w_id))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("工单名称:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e.Deditworksheet.w_name))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("工单类型:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e.Deditworksheet.w_type))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("工单状态:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e.Deditworksheet.w_status))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("工单内容:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e.Deditworksheet.w_content))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[e._v("时间:")]),e._v(" "),r("el-col",{attrs:{span:16}},[e._v(e._s(e._f("ItoTime")(e.Deditworksheet.w_time)))])],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:16}},[e._v(" ")]),e._v(" "),r("el-col",{attrs:{span:8}},[e._v("操作人："+e._s(e.Deditworksheet.w_e_id))])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改工单详情",visible:e.modifyDialogFormVisible},on:{"update:visible":function(t){e.modifyDialogFormVisible=t}}},[r("el-form",{ref:"modifyForm",attrs:{model:e.modifyForm,rules:e.addrules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"工单名称",prop:"w_name"}},[r("el-input",{model:{value:e.modifyForm.w_name,callback:function(t){e.$set(e.modifyForm,"w_name",t)},expression:"modifyForm.w_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工单类型",prop:"w_type"}},[r("el-input",{model:{value:e.modifyForm.w_type,callback:function(t){e.$set(e.modifyForm,"w_type",t)},expression:"modifyForm.w_type"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工单状态",prop:"w_status"}},[r("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.modifyForm.w_status,callback:function(t){e.$set(e.modifyForm,"w_status",t)},expression:"modifyForm.w_status"}},[r("el-option",{attrs:{label:"创建",value:"创建"}}),e._v(" "),r("el-option",{attrs:{label:"客服联系",value:"客服联系"}}),e._v(" "),r("el-option",{attrs:{label:"指派工程师",value:"指派工程师"}}),e._v(" "),r("el-option",{attrs:{label:"完成",value:"完成"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"工单内容",prop:"w_content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.modifyForm.w_content,callback:function(t){e.$set(e.modifyForm,"w_content",t)},expression:"modifyForm.w_content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.modifyOnSubmit}},[e._v("修改")])],1)],1)],1)],1)])},staticRenderFns:[]};var l=r("VU/8")(a,i,!1,function(e){r("VYkA")},"data-v-4f90612d",null);t.default=l.exports},VYkA:function(e,t){}});
//# sourceMappingURL=40.ea2fdbe91ae48534c235.js.map