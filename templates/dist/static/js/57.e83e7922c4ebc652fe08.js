webpackJsonp([57],{Z4MI:function(e,r){},rTVc:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=s("Dd8w"),t=s.n(a),o=s("w7XY"),n=s("NYxO"),i={data:function(){var e=this;return{ruleFormChangepassword:{phone_numbers:"",password:"",newpassword:"",pwd2:"",code:""},rulesChangepassword:{phone_numbers:[{pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"手机号格式不正确",required:!0,trigger:"blur"}],newpassword:[{required:!0,pattern:/^(\w){6,20}$/,message:"请输入6-20个字母、数字、下划线",trigger:"blur"}],pwd2:[{required:!0,validator:function(r,s,a){""===s?a(new Error("请再次输入密码")):s!==e.ruleFormChangepassword.newpassword?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],password:[{required:!0,pattern:/^(\w){6,20}$/,message:"密码格式不对",trigger:"blur"}],code:[{required:!0,validator:function(r,s,a){s!=e.code?a(new Error("请输入正确的验证码")):a()},trigger:"blur"}]},waitChangepassword:"发送验证码",DYdisabledChangepassword:!1,code:null,activeName:"first",ruleForm:{user_id:6,text:"",phone_number:"",phone_code:""},rules:{text:[{required:!0,message:"请输入图片验证码",trigger:"blur"}],phone_number:[{required:!0,pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"请输入正确格式的手机号",trigger:"blur"}],phone_code:[{required:!0,message:"请输入手机号验证码",trigger:"blur"}]},image_code_url:"",DYdisabled:!1,wait:"发送验证码"}},methods:{submitFormChangepassword:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.ruleFormChangepassword.user_id=r.userInfo.user_id,o.a.Changepassword(t()({},r.ruleFormChangepassword)).then(function(e){})})},FnTimeYChangepassword:function(e){var r=this;if(/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(this.ruleFormChangepassword.phone_numbers)){if(!this.DYdisabledChangepassword){this.DYdisabledChangepassword=!0;var s=60;o.a.ChangepasswordCode({phone:this.ruleFormChangepassword.phone_numbers}).then(function(e){r.code=e.data.code}).catch(function(e){});var a=setInterval(function(){s<=0?(clearInterval(a),r.waitChangepassword="发送验证码",r.DYdisabledChangepassword=!1):r.waitChangepassword=--s},1e3)}}else this.$message.error("手机号不正确")},handleClick:function(e,r){},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.ruleFormChangepassword.user_id=r.userInfo.user_id,o.a.modifyphonenumber(r.ruleForm).then(function(e){200==e.data.code[0]?(r.ruleForm={},r.$message.error(e.data.message[0])):r.$message.error(e.data.message[0])})})},FnTimeY:function(){var e=this;if(/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(this.ruleForm.phone_number)&&""!=this.ruleForm.text){if(!this.DYdisabled){this.DYdisabled=!0;var r=60;o.a.yzm({image_code:this.ruleForm.text,uuid:this.uuid},this.ruleForm.phone_number).then(function(r){200==r.data.code?(e.$message.success("发送成功"),e.getCode=r.data.getCode):e.$message.error(r.data.errmsg)}).catch(function(e){});var s=setInterval(function(){r<=0?(clearInterval(s),e.wait="发送验证码",e.DYdisabled=!1):e.wait=--r},1e3)}}else this.$message.error("手机格式不正确或图片验证码为空")},Fnimage_code_url:function(){this.uuid=this.generateUUID(),this.image_code_url=this.code_image_url+this.uuid+"/"},generateUUID:function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var s=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==r?s:3&s|8).toString(16)})}},computed:t()({},Object(n.c)(["code_image_url","userInfo"])),mounted:function(){this.Fnimage_code_url()}},l={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("div",{staticClass:"custom-tree-container"},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"修改密码",name:"first"}},[s("el-form",{ref:"ruleFormChangepassword",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormChangepassword,rules:e.rulesChangepassword,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"手机号验证",prop:"phone_numbers"}},[s("el-input",{model:{value:e.ruleFormChangepassword.phone_numbers,callback:function(r){e.$set(e.ruleFormChangepassword,"phone_numbers",r)},expression:"ruleFormChangepassword.phone_numbers"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码",prop:"code"}},[s("el-input",{model:{value:e.ruleFormChangepassword.code,callback:function(r){e.$set(e.ruleFormChangepassword,"code",r)},expression:"ruleFormChangepassword.code"}},[s("el-button",{staticClass:"Verification",attrs:{slot:"suffix",disabled:e.DYdisabledChangepassword,size:"medium"},on:{click:function(r){return e.FnTimeYChangepassword()}},slot:"suffix"},[e._v(e._s(e.waitChangepassword))])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"旧密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.ruleFormChangepassword.password,callback:function(r){e.$set(e.ruleFormChangepassword,"password",r)},expression:"ruleFormChangepassword.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newpassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.ruleFormChangepassword.newpassword,callback:function(r){e.$set(e.ruleFormChangepassword,"newpassword",r)},expression:"ruleFormChangepassword.newpassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"pwd2"}},[s("el-input",{attrs:{type:"password"},model:{value:e.ruleFormChangepassword.pwd2,callback:function(r){e.$set(e.ruleFormChangepassword,"pwd2",r)},expression:"ruleFormChangepassword.pwd2"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitFormChangepassword("ruleFormChangepassword")}}},[e._v("修改密码")])],1)],1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"修改手机号",name:"second"}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"图形验证码",prop:"text"}},[s("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入图片验证码"},model:{value:e.ruleForm.text,callback:function(r){e.$set(e.ruleForm,"text",r)},expression:"ruleForm.text"}},[s("img",{staticClass:"Verification",attrs:{slot:"suffix",src:e.image_code_url,alt:""},on:{click:function(r){return e.Fnimage_code_url()}},slot:"suffix"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号",prop:"phone_number"}},[s("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入手机号"},model:{value:e.ruleForm.phone_number,callback:function(r){e.$set(e.ruleForm,"phone_number",r)},expression:"ruleForm.phone_number"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"发送验证码",prop:"phone_code"}},[s("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入手机号验证码"},model:{value:e.ruleForm.phone_code,callback:function(r){e.$set(e.ruleForm,"phone_code",r)},expression:"ruleForm.phone_code"}},[s("el-button",{staticClass:"Verification",attrs:{slot:"suffix",disabled:e.DYdisabled,size:"medium"},on:{click:function(r){return e.FnTimeY()}},slot:"suffix"},[e._v(e._s(e.wait))])],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("修改手机号")])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var u=s("VU/8")(i,l,!1,function(e){s("Z4MI")},"data-v-2bccffe5",null);r.default=u.exports}});
//# sourceMappingURL=57.e83e7922c4ebc652fe08.js.map