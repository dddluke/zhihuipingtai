webpackJsonp([54],{"7zkv":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("Dd8w"),s=t.n(o),a=t("w7XY"),i=t("NYxO"),n={data:function(){var e=this;return{ruleForm:{text:"",phone_number:"",phone_code:"",pass_word:"",pass_word2:""},rules:{text:[{required:!0,message:"请输入图片验证码",trigger:"blur"}],phone_number:[{required:!0,pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"请输入正确格式的手机号",trigger:"blur"}],phone_code:[{required:!0,message:"请输入手机号验证码",trigger:"blur"}],pass_word:[{validator:function(e,r,t){var o=new RegExp(/^(\w){6,20}$/);""===r?t(new Error("请输入密码")):o.test(r)||t(new Error("包含数字和字母，且长度为8-16位")),t()},trigger:"blur"}],pass_word2:[{validator:function(r,t,o){""===t?o(new Error("请再次输入密码")):t!==e.ruleForm.pass_word?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},image_code_url:"",DYdisabled:!1,wait:"发送验证码"}},methods:{FnTimeY:function(){var e=this;if(/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(this.ruleForm.phone_number)&&""!=this.ruleForm.text){if(!this.DYdisabled){this.DYdisabled=!0;var r=60;a.a.yzm({image_code:this.ruleForm.text,uuid:this.uuid},this.ruleForm.phone_number).then(function(r){200==r.data.code?(e.$message.success("发送成功"),e.getCode=r.data.getCode):e.$message.error(r.data.errmsg)}).catch(function(e){});var t=setInterval(function(){r<=0?(clearInterval(t),e.wait="发送验证码",e.DYdisabled=!1):e.wait=--r},1e3)}}else this.$message.error("手机格式不正确或图片验证码为空")},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;a.a.forgetpassword(r.ruleForm).then(function(e){200==e.data.code[0]?(r.$message.error(e.data.errmsg[0]),r.$router.push("/login")):r.$message.error(e.data.errmsg[0])})})},Fnimage_code_url:function(){this.uuid=this.generateUUID(),this.image_code_url=this.code_image_url+this.uuid+"/"},generateUUID:function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==r?t:3&t|8).toString(16)})}},computed:s()({},Object(i.c)(["code_image_url"])),mounted:function(){this.Fnimage_code_url()}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"tit"},[e._v("\n        找回密码\n    ")]),e._v(" "),t("div",{staticClass:"ruleFormBox"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"图形验证码",prop:"text"}},[t("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入图片验证码"},model:{value:e.ruleForm.text,callback:function(r){e.$set(e.ruleForm,"text",r)},expression:"ruleForm.text"}},[t("img",{staticClass:"Verification",attrs:{slot:"suffix",src:e.image_code_url,alt:""},on:{click:function(r){return e.Fnimage_code_url()}},slot:"suffix"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"phone_number"}},[t("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入手机号"},model:{value:e.ruleForm.phone_number,callback:function(r){e.$set(e.ruleForm,"phone_number",r)},expression:"ruleForm.phone_number"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"发送验证码",prop:"phone_code"}},[t("el-input",{staticClass:"L_inp",attrs:{placeholder:"请输入手机号验证码"},model:{value:e.ruleForm.phone_code,callback:function(r){e.$set(e.ruleForm,"phone_code",r)},expression:"ruleForm.phone_code"}},[t("el-button",{staticClass:"Verification",attrs:{slot:"suffix",disabled:e.DYdisabled,size:"medium"},on:{click:function(r){return e.FnTimeY()}},slot:"suffix"},[e._v(e._s(e.wait))])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"pass_word"}},[t("el-input",{staticClass:"L_inp",attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.pass_word,callback:function(r){e.$set(e.ruleForm,"pass_word",r)},expression:"ruleForm.pass_word"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认新密码",prop:"pass_word2"}},[t("el-input",{staticClass:"L_inp",attrs:{type:"password",placeholder:"请输入密码确认"},model:{value:e.ruleForm.pass_word2,callback:function(r){e.$set(e.ruleForm,"pass_word2",r)},expression:"ruleForm.pass_word2"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("找回密码")])],1)],1)],1)])},staticRenderFns:[]};var u=t("VU/8")(n,l,!1,function(e){t("uWmA")},"data-v-2f3e1049",null);r.default=u.exports},uWmA:function(e,r){}});
//# sourceMappingURL=54.3b884dc6f0d8ec4d656d.js.map